@using ProjetoEcommerce.Dominio.Entidades.Pagamento
@using ProjetoEcommerce.Models.ViewModels
@model PagarMetodoViewModel
@{
    ViewBag.Title = "Método de pagamento";
    int i = 1;
    ViewBag.ShowMenu = true;
    ViewBag.UsuarioLogado = true;
    ViewBag.Usuario = Model.Usuario.Nome;
    ViewBag.SaldoCarteira = Model.Usuario.Carteira.Saldo;

}

<h3 class="text-center font-weight-normal">Método de pagamento</h3>
<h4 class="font-weight-light float-left">Produtos</h4>
<h4 class="font-weight-light float-right">Selecione um método de pagamento.</h4>

<div id="accordion" class="float-left" style="clear:left; margin-top:10px; width:49%; margin-right:1%;padding-right: 1%; height:90%; border-right:1px solid rgb(230, 230, 230)">

    @foreach (var item in Model.ListaProdutos)
    {
        <div class="card text-white bg-secondary" style="margin-bottom:0.4em">
            <div class="card-header" style="max-height:10em" id="@("heading" + i.ToString())">
                <h5 class="mb-0">
                    <button class="btn btn-link text-white collapsed" data-toggle="collapse" data-target="@("#collapse" + i.ToString())" aria-expanded="false" aria-controls="@("collapse" + i.ToString())">
                        <div class="float-left">
                            @item.Nome
                            (@item.Quantidade)

                        </div>
                    </button>
                    @if (i == 1)
                    {
                        <span class="float-right" style="font-size:10pt; margin-top:0.7em">R$@item.PrecoTotal</span>
                    }
                    else
                    {
                        <span class="float-right" style="font-size:10pt;margin-top:0.7em">+ R$@item.PrecoTotal</span>
                    }
                </h5>
            </div>
            <div id="@("collapse" + i.ToString())" class="collapse" aria-labelledby="@("heading" + i.ToString())" data-parent="#accordion">
                <div class="card-body bg-white">
                    <img src="@item.UrlImagem" alt="Imgem do Produto @item.Nome " class="img-thumbnail float-left" style="height:50%; width:50%; object-fit: contain; margin-top:1em;margin-bottom:1em">
                    <p style="width:49%; margin-top:25%;margin-bottom:25%" class="text-center text-dark float-right">@item.DescricaoProduto</p>
                    <table class="table" style="border-top:hidden">
                        <thead>
                            <tr><th></th><th></th><th></th></tr>
                        </thead>
                        <tbody>
                            <tr><td>Preço</td><td></td><td>@item.Preco</td></tr>
                            <tr><td>Quantidade</td><td style="text-align:right"></td><td>@item.Quantidade</td></tr>
                            <tr><th>Preço total</th><td></td><th>@item.PrecoTotal</th></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        i++;
    }
    <hr style="margin-top:10px;margin-bottom:10px;" />
    <div class="card text-white bg-info mb-3">
        <div class="card-header">Você vai pagar: <div class="float-right" style="font-size:12pt;"><b>R$@Model.PrecoTotalVenda</b></div></div>
    </div>
    <br /><br /><br />
</div>


<div class="float-right" style="clear:right;width:49%">
    @foreach (var item in Model.MetodosPagamento)
    {
        <a href="@Url.Action(item.Action, "Pagar",new { id=Model.Usuario.UsuarioID-1})" class="btn btn-primary btn-block">@item.Descricao <i class="@item.FA"></i></a>
    }
</div>

<div class="clearfix"></div>
